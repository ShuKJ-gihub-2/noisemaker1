<input Placeholder="リロードタイム" type="number" id="re">
<input Placeholder="生成数" type="number" id="historyCount" value="500">
<button id="startBtn">リロード連打で履歴量産</button>
<div id="status"></div>

<script>
    window.onload = function() {
        // URLから今のカウントを取得
        const urlParams = new URLSearchParams(window.location.search);
        const currentStep = parseInt(urlParams.get('step') || "0");
        const maxStep = parseInt(urlParams.get('max') || "0");
        const timeStep = parseInt(urlParams.get('time') || "0")

        if (currentStep < maxStep) {
            document.getElementById('status').innerText = `${currentStep} / ${maxStep} 生成中...`;
            
            // 次のカウントへリロード
            setTimeout(() => {
                window.location.href = `?step=${currentStep + 1}&max=${maxStep}`;
            }, timeStep); // 0.1秒ごとにリロード
        } else if (maxStep > 0) {
            document.getElementById('status').innerText = maxStep + "件完了！";
            alert("200件の壁を突破しました！");
        }
    };

    document.getElementById('startBtn').onclick = function() {
        const time = document.getElementById('historyCount').value;
        const count = document.getElementById('re').value;
        // 最初の1回目を起動
        window.location.href = `?step=1&max=${count}&time=${time}`;
    };
</script>
